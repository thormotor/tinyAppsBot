Приложение-бот для мессенджеров на C++. Представляет из себя реализацию чат-бота, осуществляющего обмен сообщениями с пользователями через публичный чат мессенджера и поддерживающего расширение функционала бота с помощью встроенных мини-приложений.

На текущий момент приложение полностью работоспособно и поддерживает один мессенджер Viber и одно мини-приложение - игру <a href  = "https://ru.wikipedia.org/wiki/%D0%91%D1%8B%D0%BA%D0%B8_%D0%B8_%D0%BA%D0%BE%D1%80%D0%BE%D0%B2%D1%8B">«Быки и Коровы»</a>.

*Проект создан в качестве учебного и может содержать в себе неоднозначные решения и подходы, родившиеся в процессе экспериментов.*

### Описание работы

tinyAppsBot - сетевое серверное приложение, работающее в консольном режиме. После запуска ожидает подключения по протоколу HTTPS и обрабатывает webhook соединения от мессенджеров, инициированные, например, пользователями чата.
При получении сообщения обрабатывает его, формирует ответ и пересылает мессенджеру. Пользователь получает ответ. И так далее.

<img src="media/capture_01.png" height="300"/> <img src="media/viber_02.jpg" height="300"/>

За обработку сообщений пользователя отвечает встроенный бот, но он обладает ограниченным функционалом и принимает только 4 команды:
- `?` - помощь;
- `list` - получить список мини-приложений;
- `app [N]` - запустить мини-приложение N;
- `stop` - остановить выполнение запущенного ранее мини-приложения;

Остальной функционал реализуется уже с помощью мини-приложений. Мини-приложения - это дополнительные обработчики сообщений пользователя, которые пользователь может запускать или остановливать по своему желанию с помощью команд боту.

Такой дополнительный обработчик, после запуска пользователем, самостоятельно обрабатывает входящие сообщения и отвечает на них в соответствии со своим алгоритмом работы.

Таким образом, расширяя перечень мини-приложений, можно предоставлять пользователю возможность выбора нужного функционала из доступного.

Доступное мини-приложение "Быки и Коровы" послы запуска конкретным пользователем генерирует случайное четырехзначное число и ожидает от пользователя сообщений-предположений, какое это число. Каждое полученное предположение сравнивает со своим и отвечает пользователю в "быках" и "коровах" насколько он близок к цели.

<img src="media/viber_03_part.jpg" height="300"/>

### Реализация

Архитектура приложения построена на принципах ООП. Классы приложения разбиты по логическим модулям и схематически могут быть представлены в виде следующей диаграммы:

<img src="media/BaseDiagram.png" height="600">

Зависимости в приложении реализованы с помощью интерфейсов, соответственно новый функционал можно гармонично добавлять  создавая новые реализации интерфейсов. Например, добавлять поддержку других мессенджеров или новые мини-приложения.

Базовое описание классов и интерфейсов реализовано с помощью с помощью системы документирования исходных кодов **Doxygen** и доступно по <a href="https://thor.hostronavt.ru">ссылке</a>.

- При создании приложения отдельное внимание уделялось использованию паттернов проектирования и принципов SOLID, а исходные тексты оформлялись по рекомендациям <a href="https://google.github.io/styleguide/cppguide">Google Style Guide</a>;

- Приложение написано на C++ 11/14 (MSVC 2019) с использованием кроссплатформенных библиотек:
	- Boost.Asio (+OpenSSL)
	- Boost.Beast
	- Boost.Algorithm
	- Boost.PropertyTree
	- spdlog
	- fmt

- Приложение многопоточное, количество потоков настраивается в конфигурации;

- Для поиска и анализа ошибок реализовано логирование на экран и в файл, дополнительно, в отдельный файл, логируются все HTTP пакеты;

- Настройка приложения производится единым конфигурационнным файлом `config.json`.

- Реализована возможноть работы с несколькими мессенджерами одновременно.

- Для контроля над утечками памяти использовалась библиотека <a href="https://github.com/KindDragon/vld.git">Visual Leak Detector</a>.

### Работающий экземпляр

Проверить работу бота можно подключившись в Viber к паблик чату **tinyAppsBot** по QR коду:
<p><img src="media/tinyAppsBot_URI.png" width="100" /></p>~


***
